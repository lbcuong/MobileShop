@model MobileShop.Areas.Admin.Models.PurchaseOrder

@{
    ViewData["Title"] = "Create";
    Layout = "~/Areas/Admin/Views/shared/_layout.cshtml";
}

<div class="border-bottom m-0 p-0 mb-2">
    <h5>Order Management / Purchase Orders / Create</h5>
</div>

<div class="shadow rounded-0">
    <div class="row">
        <div class="col-md-12">
            <div class="d-flex justify-content-between border-bottom py-2 mb-3">
                <h5 class="text-secondary">New Banner</h5>
                <a class="managing text-decoration-none" asp-action="Index"><i class="fa-solid fa-arrow-rotate-left"></i> Back to List</a>
            </div>
            <form asp-action="Create">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                <div class="form-group mb-2">
                    <label asp-for="SupplierId" class="control-label"></label>
                    <select asp-for="SupplierId" class="form-control" asp-items="ViewBag.SupplierId"></select>
                </div>
                <div class="form-group mb-2">
                    <label asp-for="Total" class="control-label"></label>
                    <input asp-for="Total" class="form-control" />
                    <span asp-validation-for="Total" class="text-danger"></span>
                </div>
                <div class="form-group mb-2">
                    <label asp-for="Status" class="control-label"></label>
                    <input asp-for="Status" value="Ordered" class="form-control" readonly="readonly" />
                    <span asp-validation-for="Status" class="text-danger"></span>
                </div>
                <div class="border-top my-3">
                    <table class="table table-striped table-borderless my-3" id="purchaseOrderDetail">
                        <tr>
                            <th>Item</th>
                            <th>Quantity</th>
                            <th>Import Price</th>
                            <th></th>
                        </tr>
                        @for (int puchaseOrderDetail = 0; puchaseOrderDetail < Model.PurchaseOrderDetail.Count; puchaseOrderDetail++)
                        {
                            <tr>
                                <td>
                                    @Html.DropDownListFor(x => x.PurchaseOrderDetail[puchaseOrderDetail].ItemId, ViewBag.ItemId as IEnumerable<SelectListItem>, "Select Item", new { htmlAttributes = new { @class = "form-control my-2 py-2"} })
                                    <span asp-validation-for="@Model.PurchaseOrderDetail[puchaseOrderDetail].ItemId" class="text-danger"></span>
                                </td>
                                <td>
                                    @Html.EditorFor(x => x.PurchaseOrderDetail[puchaseOrderDetail].Quantity, new { htmlAttributes = new { @class = "form-control", @min = "0" } })
                                    <span asp-validation-for="@Model.PurchaseOrderDetail[puchaseOrderDetail].Quantity" class="text-danger"></span>
                                </td>
                                <td>
                                    @Html.EditorFor(x => x.PurchaseOrderDetail[puchaseOrderDetail].ImportPrice, new { htmlAttributes = new { @class = "form-control", @min = "0" } })
                                    <span asp-validation-for="@Model.PurchaseOrderDetail[puchaseOrderDetail].ImportPrice" class="text-danger"></span>
                                </td>
                                <td>
                                    <button id="btnadd-@puchaseOrderDetail" type="button" class="btn text-secondary visible" onclick="AddItem(this)"><i class="fa-solid fa-circle-plus"></i></button>
                                    <button id="btnremove-@puchaseOrderDetail" type="button" class="btn text-secondary invisible" onclick="DeleteItem(this)"><i class="fa-solid fa-trash-can"></i></button>
                                </td>
                            </tr>
                        }
                    </table>
                </div>
                <input type="hidden" id="lastIndex" value="0" />
                <br>
                <div class="form-group mb-2 d-flex justify-content-between">
                    <input type="submit" value="Create" class="btn btn-info w-50 text-white me-5" />
                </div>
            </form>
        </div>
    </div>
</div>



@if (TempData["SuccessMessage"] != null)
{
    <div class="alert alert-success alert-dismissable rounded-0 border-0 shadow-sm show-success-message">
        <strong>@TempData["SuccessMessage"]</strong>
    </div>
}

